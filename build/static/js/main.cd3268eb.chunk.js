(this["webpackJsonpreactnd-would-you-rather"]=this["webpackJsonpreactnd-would-you-rather"]||[]).push([[0],{33:function(e,t,a){e.exports=a(51)},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),s=a.n(o),l=a(10),i=a(1),u=a(8),c=(a(42),a(13)),m=a(14),d=a(16),h=a(15),p=a(11),v=(a(43),a(32)),b=a(4),E=a(3),f={janedoe:{id:"janedoe",name:"Jane Doe",avatarURL:"images/avatar-1.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},carltompkins:{id:"carltompkins",name:"Carl Tompkins",avatarURL:"images/avatar-2.jpg",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"images/avatar-3.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},g={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"janedoe",timestamp:1467166872634,optionOne:{votes:["janedoe"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","janedoe"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"janedoe",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["janedoe"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"carltompkins",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["janedoe"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"carltompkins",timestamp:1489579767190,optionOne:{votes:["carltompkins"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["carltompkins"],text:"write Swift"}}};function j(){return new Promise((function(e,t){setTimeout((function(){return e(Object(E.a)({},f))}),1e3)}))}function O(){return new Promise((function(e,t){setTimeout((function(){return e(Object(E.a)({},g))}),1e3)}))}function w(e){return new Promise((function(t,a){var n=e.author,r=function(e){var t=e.optionOneText,a=e.optionTwoText,n=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:n,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:a}}}(e);setTimeout((function(){g=Object(E.a)({},g,Object(b.a)({},r.id,r)),f=Object(E.a)({},f,Object(b.a)({},n,Object(E.a)({},f[n],{questions:f[n].questions.concat([r.id])}))),t(r)}),1e3)}))}var N=function(e){return{type:"RECEIVE_QUESTIONS",questions:e}},q=function(e){return{type:"RECEIVE_USERS",users:e}},y=function(e){return function(t){return w(e).then((function(e){t(function(e){return{type:"ADD_QUESTION",question:e}}(e)),t(function(e){return{type:"ADD_QUESTION_USER",question:e}}(e))})).catch((function(e){alert("Error adding new poll, please try again!",e)}))}},U=(a(44),Object(i.b)((function(e,t){var a=e.questions,n=e.users,r=e.authedUser,o=t.id,s=a[o];return{question:s,author:n[s.author],questions:a,users:n,authedUser:r,id:o}}))((function(e){return r.a.createElement("div",{className:"middle aligned item"},r.a.createElement("img",{className:"ui avatar image",src:e.users[e.questions[e.id].author].avatarURL,alt:"".concat(e.users[e.questions[e.id].author].name,"'s avatar")}),r.a.createElement("div",{className:"content"},r.a.createElement("h4",{className:"ui header"},e.users[e.questions[e.id].author].name," asked:"),r.a.createElement("h2",{className:"ui header"},"Would you Rather"),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"...",[e.question.optionOne.text],"..."))),r.a.createElement("div",{className:"extra"},r.a.createElement(u.b,{className:"ui right floated button",to:"questions/".concat(e.id)},"View Poll",r.a.createElement("i",{className:"right chevron icon"}))))}))),x=Object(i.b)((function(e){return{allQuestionIds:Object.keys(e.questions).sort((function(t,a){return e.questions[a].timestamp-e.questions[t].timestamp})),questions:e.questions,users:e.users,authedUser:e.authedUser}}))((function(e){var t=Object.keys(e.users[e.authedUser].answers),a=e.allQuestionIds.filter((function(e){return!t.includes(e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Un-Answered Questions"),a.length>0?r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui very relaxed divided items"},a.map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(U,{id:e}))})))):r.a.createElement("div",{className:"ui segment"},r.a.createElement("h3",null,e.users[e.authedUser].name," has no un-answered questions.")))})),T=Object(i.b)((function(e){return{allQuestionIds:Object.keys(e.questions).sort((function(t,a){return e.questions[a].timestamp-e.questions[t].timestamp})),users:e.users,authedUser:e.authedUser}}))((function(e){var t=Object.keys(e.users[e.authedUser].answers),a=e.allQuestionIds.filter((function(e){return t.includes(e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Answered Questions"),a.length>0?r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui very relaxed divided items"},a.map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(U,{id:e}))})))):r.a.createElement("div",{className:"ui segment"},r.a.createElement("h3",null,e.users[e.authedUser].name," has no answered questions.")))})),k=(a(46),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={showAnswered:!1},e.onUnansweredClick=function(){e.setState((function(){return{showAnswered:!1}}))},e.onAnsweredClick=function(){e.setState((function(){return{showAnswered:!0}}))},e.renderHomepage=function(){return null!==e.props.authedUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"buttons-container"},e.state.showAnswered?r.a.createElement("button",{className:"ui button",to:"/",onClick:e.onUnansweredClick},"Click here to view Un-answered Questions"):r.a.createElement("button",{className:"ui blue button",to:"/",onClick:e.onAnsweredClick},"Answered Questions")),e.state.showAnswered?r.a.createElement(T,null):r.a.createElement(x,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Welcome"),r.a.createElement("h3",null,"Please login at the top right to continue"))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},this.renderHomepage())}}]),a}(n.Component)),S=Object(i.b)((function(e){return{authedUser:e.authedUser}}))(k),A=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"404 Page not found!"),r.a.createElement(u.b,{className:"ui blue button",to:"/"},"Return Home"))},I=(a(47),{handleAddAnswer:function(e){return function(t){var a;t({type:"ADD_ANSWER",authedUser:(a=e).authedUser,qid:a.qid,answer:a.answer}),function(e){var t=e.authedUser,a=e.qid,n=e.answer;return new Promise((function(e,r){setTimeout((function(){f=Object(E.a)({},f,Object(b.a)({},t,Object(E.a)({},f[t],{answers:Object(E.a)({},f[t].answers,Object(b.a)({},a,n))}))),g=Object(E.a)({},g,Object(b.a)({},a,Object(E.a)({},g[a],Object(b.a)({},n,Object(E.a)({},g[a][n],{votes:g[a][n].votes.concat([t])}))))),e()}),500)}))}(e).catch((function(e){return console.log("Unable to add answer to database",e)}))}}}),C=Object(i.b)((function(e,t){return{users:e.users,questions:e.questions,authedUser:e.authedUser,pollid:t.pollid}}),I)((function(e){return void 0===e.questions[e.pollid]?r.a.createElement(A,null):r.a.createElement("div",{className:"ui centered card"},r.a.createElement("div",{className:"content",id:"avatar"},r.a.createElement("img",{className:"ui avatar image",src:"/"+e.users[e.questions[e.pollid].author].avatarURL,alt:"".concat(e.users[e.questions[e.pollid].author].name,"'s avatar")}),e.users[e.questions[e.pollid].author].name," asks:"),r.a.createElement("div",{className:"content"},r.a.createElement("h2",{className:"ui header"},"Would you Rather"),r.a.createElement("div",{className:"description"},r.a.createElement("form",{className:"ui form",onSubmit:function(t){t.preventDefault();var a=t.target.elements.poll.value;if(Object.keys(e.users[e.authedUser].answers).includes(e.pollid))alert("You've already voted on this poll");else{var n={authedUser:e.authedUser,qid:e.pollid,answer:a};e.handleAddAnswer(n)}}},r.a.createElement("div",{className:"grouped fields"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",id:"opt-one",name:"poll",value:"optionOne"}),r.a.createElement("label",{htmlFor:"opt-one"},e.questions[e.pollid].optionOne.text))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",id:"opt-two",name:"poll",value:"optionTwo"}),r.a.createElement("label",{htmlFor:"opt-two"},e.questions[e.pollid].optionTwo.text)))),r.a.createElement("button",{className:"fluid ui blue button",type:"submit"},"Submit")))))})),R=(a(48),Object(i.b)((function(e,t){return{users:e.users,questions:e.questions,authedUser:e.authedUser,pollid:t.pollid}}))((function(e){return r.a.createElement("div",{className:"ui container"},function(){var t=e.users,a=e.questions,n=e.authedUser,o=e.pollid,s=a[o].optionOne.votes.length+a[o].optionTwo.votes.length,l=a[o].optionOne.votes.length,i=a[o].optionTwo.votes.length;return void 0===a[o]?r.a.createElement(A,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"ui header",id:"results-header"},"Poll Results"),r.a.createElement("div",{className:"ui centered card"},r.a.createElement("div",{className:"content",id:"avatar"},r.a.createElement("img",{className:"ui avatar image",src:"/"+e.users[e.questions[e.pollid].author].avatarURL,alt:"".concat(e.users[e.questions[e.pollid].author].name,"'s avatar")}),t[a[o].author].name," asked:"),r.a.createElement("div",{className:"content"},r.a.createElement("h2",{className:"ui header"},"Would you Rather"),r.a.createElement("div",{className:"description"},a[o].optionOne.votes.includes(n)&&r.a.createElement("div",{className:"ui pointing below red basic label"},"Your selection"),r.a.createElement("p",null,a[o].optionOne.text," ")),r.a.createElement("div",{className:"label-container"},r.a.createElement("div",{className:"ui blue label"},r.a.createElement("p",null,a[o].optionOne.votes.length," ",1!==l?"votes ":"vote ","  |"," ".concat(Math.round(l/s*100)," %"))))),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"description"},a[o].optionTwo.votes.includes(n)&&r.a.createElement("div",{className:"ui pointing below red basic label"}," your selection"),r.a.createElement("p",null,a[o].optionTwo.text," ")),r.a.createElement("div",{className:"label-container"},r.a.createElement("div",{className:"ui blue label"},r.a.createElement("p",null,a[o].optionTwo.votes.length," ",1!==i?"votes ":"vote ","  |"," ".concat(Math.round(i/s*100)," %")))))))}())}))),D=Object(i.b)((function(e,t){return{users:e.users,authedUser:e.authedUser,pollId:t.match.params.question_id}}))((function(e){return r.a.createElement("div",{className:"ui container"},function(){if(null!==e.authedUser){var t=Object.keys(e.users[e.authedUser].answers);return r.a.createElement(r.a.Fragment,null,t.includes(e.pollId)?r.a.createElement(R,{pollid:e.pollId}):r.a.createElement(C,{pollid:e.pollId}))}return r.a.createElement("h3",null,"Please login at the top right to view poll details")}())})),F=function(e){return{type:"SET_AUTHED_USER",id:e}},_={setAuthedUser:F},z=Object(i.b)(null,_)((function(e){var t=e.setAuthedUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui item"},r.a.createElement("label",{htmlFor:"user-select"},"Login")),r.a.createElement("select",{className:"ui selection dropdown",defaultValue:"",name:"users",id:"user-select",onChange:function(e){var a=e.target.value;t(a)}},r.a.createElement("option",{disabled:!0,value:""},"--Select a user to login--"),r.a.createElement("option",{value:"janedoe"},"Jane Doe"),r.a.createElement("option",{value:"carltompkins"},"Carl Tompkins"),r.a.createElement("option",{value:"johndoe"},"John Doe")))})),P=(a(49),Object(p.f)(Object(i.b)((function(e){return{authedUser:e.authedUser,users:e.users}}))((function(e){var t=function(){e.dispatch(F(null)),e.history.push("/")};return r.a.createElement("div",{className:"ui container",id:"nav-container"},r.a.createElement("div",{className:"ui secondary pointing menu"},r.a.createElement(u.c,{className:"blue item",to:"/",exact:!0,activeClassName:"active"},"Home"),r.a.createElement(u.c,{className:"blue item",to:"/add",activeClassName:"active"},"Add Poll"),r.a.createElement(u.c,{className:"blue item",to:"/leaderboard",activeClassName:"active"},"Leaderboard"),r.a.createElement("div",{className:"right menu"},null===e.authedUser?r.a.createElement(z,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{className:"ui avatar image",src:"/"+e.users[e.authedUser].avatarURL,alt:"".concat(e.users[e.authedUser].name,"'s avata")}),r.a.createElement("span",null,e.users[e.authedUser].name),r.a.createElement("button",{className:"ui tiny button",onClick:t},"Logout"))))))})))),Q=Object(i.b)((function(e,t){return{users:e.users,id:t.id}}))((function(e){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h4",{className:"ui image header"},r.a.createElement("img",{className:"ui avatar image",src:"/"+e.users[e.id].avatarURL,alt:"".concat(e.users[e.id].name,"'s avatar")}),r.a.createElement("div",{className:"content"},e.users[e.id].name))),r.a.createElement("td",null,Object.keys(e.users[e.id].answers).length),r.a.createElement("td",null,e.users[e.id].questions.length)))})),L=Object(i.b)((function(e){var t=e.users,a=e.authedUser,n=Object.keys(t).map((function(e){return{userId:e,total:t[e].questions.length+Object.keys(t[e].answers).length}}));return{userIds:(n=n.sort((function(e,t){return t.total>e.total?1:-1}))).map((function(e){return e.userId})),authedUser:a}}))((function(e){var t=null===e.authedUser?r.a.createElement("h3",null,"Please login at the top right to continue to the homepage"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"header-text"},"Leaderboard"),r.a.createElement("table",{className:"ui blue celled padded table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h3",null,"UserName")),r.a.createElement("th",null,r.a.createElement("h3",null,"Answered")),r.a.createElement("th",null,r.a.createElement("h3",null,"Asked")))),e.userIds.map((function(e){return r.a.createElement(Q,{key:e,id:e})}))));return r.a.createElement("div",{className:"ui container"},t)})),W=(a(50),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={optionOne:"",optionTwo:""},e.onInputOneChange=function(t){var a=t.target.value.trimStart();e.setState((function(){return{optionOne:a}}))},e.onInputTwoChange=function(t){var a=t.target.value.trimStart();e.setState((function(){return{optionTwo:a}}))},e.onFormSubmit=function(t){if(t.preventDefault(),""===t.target.elements.one.value||""===t.target.elements.two.value)alert("Please fill in both fields before submitting.");else{var a=e.state.optionOne,n=e.state.optionTwo,r={author:e.props.authedUser,optionOneText:a,optionTwoText:n};e.props.dispatch(y(r)),e.props.history.push("/")}},e.renderUI=function(){var t=e.state,a=t.optionOne,n=t.optionTwo;return null!==e.props.authedUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"header"},"Add Poll"),r.a.createElement("div",{className:"ui segment"},r.a.createElement("h2",{className:"ui header"},"Would you Rather"),r.a.createElement("div",null,r.a.createElement("form",{className:"ui form",onSubmit:e.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"option-one"},"Option One"),r.a.createElement("input",{type:"text",id:"option-one",placeholder:"Please enter 1st option.",value:a,name:"one",onChange:e.onInputOneChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"option-two"},"Option Two"),r.a.createElement("input",{type:"text",id:"option-two",placeholder:"Please enter 2nd option.",value:n,name:"two",onChange:e.onInputTwoChange})),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},className:"addpoll-btn-container"},""!==a&&""!==n?r.a.createElement("p",null):r.a.createElement("p",{style:{color:"red"}},"Please fill in both fields before submitting."),r.a.createElement("button",{className:"ui blue button",type:"submit",disabled:""===a||""===n},"Submit")))))):r.a.createElement("h3",null,"Please login at the top right to continue")},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},this.renderUI())}}]),a}(r.a.Component)),J=Object(i.b)((function(e){return{authedUser:e.authedUser}}))(W),H=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch((function(e){return Promise.all([j(),O()]).then((function(t){var a=Object(v.a)(t,2),n=a[0],r=a[1];e(q(n)),e(N(r))})).catch((function(e){console.log("Unable to load initial user and question data.",e)}))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(P,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:S}),r.a.createElement(p.a,{path:"/questions/:question_id",component:D}),r.a.createElement(p.a,{path:"/add",exact:!0,component:J}),r.a.createElement(p.a,{path:"/leaderboard",exact:!0,component:L}),r.a.createElement(p.a,{component:A})))}}]),a}(r.a.Component),V=Object(i.b)()(H),M=a(22),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_QUESTIONS":return Object(E.a)({},e,{},t.questions);case"ADD_ANSWER":return Object(E.a)({},e,Object(b.a)({},t.qid,Object(E.a)({},e[t.qid],Object(b.a)({},t.answer,Object(E.a)({},e[t.qid][t.answer],{votes:e[t.qid][t.answer].votes.includes(t.authedUser)?Object(M.a)(e[t.qid][t.answer].votes):e[t.qid][t.answer].votes.concat([t.authedUser])})))));case"ADD_QUESTION":return Object(E.a)({},e,Object(b.a)({},t.question.id,Object(E.a)({},t.question)));default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USERS":return Object(E.a)({},e,{},t.users);case"ADD_ANSWER":return Object(E.a)({},e,Object(b.a)({},t.authedUser,Object(E.a)({},e[t.authedUser],{answers:Object(E.a)({},e[t.authedUser].answers,Object(b.a)({},t.qid,t.answer))})));case"ADD_QUESTION_USER":return Object(E.a)({},e,Object(b.a)({},t.question.author,Object(E.a)({},e[t.question.author],{questions:[].concat(Object(M.a)(e[t.question.author].questions),[t.question.id])})));default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHED_USER":return t.id;default:return e}},G=Object(l.c)({questions:Y,users:$,authedUser:B}),K=a(31),X=function(e){return function(t){return function(a){console.group(a.type),console.log("The action: ",a);var n=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),n}}},Z=Object(l.a)(K.a,X),ee=Object(l.d)(G,Z);s.a.render(r.a.createElement(i.a,{store:ee},r.a.createElement(u.a,null,r.a.createElement(V,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.cd3268eb.chunk.js.map